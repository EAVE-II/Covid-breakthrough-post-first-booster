## Positivity rate from ONS infection survey as of 2022-03-25
# Non overlapping 14-day weighted estimates of percentage of population testing positive for COVID-19 England. 
# Table 1d 
# sheetd 1d 

ifrt <- c(0.33,0.29,0.13,0.08,0.05,0.06,0.08,0.06,0.08,0.15,0.29,0.76,1.15,1.36,1.39,
          1.11,1.31,2.15,2.16,1.82,1.18,0.59,0.37,0.30,0.25,0.13,0.08,0.10,0.17,0.23,
          0.58,1.18,1.41,1.34,1.37,1.26,1.20,1.57,1.85,1.86,1.58,1.75,2.36,5.14,5.84,5.20,
          4.85,3.46,4.01,6.55,6.98)

sp <- c("2020-04-26","2020-05-10","2020-05-24","2020-06-07","2020-06-21","2020-07-05",
        "2020-07-19","2020-08-02","2020-08-16","2020-08-30","2020-09-13",
        "2020-09-27","2020-10-11","2020-10-25","2020-11-08","2020-11-22",
        "2020-12-06","2020-12-20","2021-01-03","2021-01-17","2021-01-31",
        "2021-02-14","2021-02-28","2021-03-14","2021-03-28","2021-04-11",
        "2021-04-25","2021-05-09","2021-05-23","2021-06-06","2021-06-20",
        "2021-07-04","2021-07-18","2021-08-01","2021-08-15","2021-08-29",
        "2021-09-12","2021-09-26","2021-10-10","2021-10-24","2021-11-07",
        "2021-11-21","2021-12-05","2021-12-19","2022-01-02","2022-01-16",
        "2022-01-30","2022-02-13","2022-02-27","2022-03-13","2022-03-27")
        

sp <- as.Date(sp)
fsp <- c(format(sp,"%b%y"))
ifrt[match(fsp,fsp)]
idt <- data.table(sp,ifrt)

table(idt$ifrt)
idt[,c.infrate := cut(ifrt, breaks = c(0,0.5,1,1.25,1.5,2,3,100), right =T)]
table(idt$c.infrate)
stopifnot(length(sp) == length(ifrt))

View(idt)
